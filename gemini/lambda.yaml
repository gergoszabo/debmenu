# This AWS SAM template has been generated from your function's configuration. If
# your function has one or more triggers, note that the AWS resources associated
# with these triggers aren't fully specified in this template and include
# placeholder values. Open this template in AWS Infrastructure Composer or your
# favorite IDE and modify it to specify a serverless application with other AWS
# resources.
AWSTemplateFormatVersion: '2010-09-09'
Transform: AWS::Serverless-2016-10-31
Description: An AWS Serverless Application Model template describing your function.
Resources:
    debmenugeminis3:
        Type: AWS::Serverless::Function
        Properties:
            CodeUri: .
            Description: ''
            MemorySize: 128
            Timeout: 300
            Handler: index.handler
            Runtime: nodejs22.x
            Architectures:
                - x86_64
            EphemeralStorage:
                Size: 512
            Environment:
                Variables:
                    AAKID: ${AWS_ACCESS_KEY_ID}
                    AAKSK: ${AWS_SECRET_ACCESS_KEY}
                    GEMINI_API_KEY: ${GEMINI_API_KEY}
            EventInvokeConfig:
                MaximumEventAgeInSeconds: 21600
                MaximumRetryAttempts: 2
            PackageType: Zip
            Policies:
                - Statement:
                      - Effect: Allow
                        Action:
                            - logs:CreateLogGroup
                        Resource: ${LOGS_ARN}
                      - Effect: Allow
                        Action:
                            - logs:CreateLogStream
                            - logs:PutLogEvents
                        Resource:
                            - ${LOG_GROUP_ARN}
            RecursiveLoop: Terminate
            SnapStart:
                ApplyOn: None
            Events:
                Schedule1:
                    Type: Schedule
                    Properties:
                        Schedule: cron(0 7 ? * MON-FRI *)
                Schedule2:
                    Type: Schedule
                    Properties:
                        Schedule: cron(0 11 ? * MON-FRI *)
            RuntimeManagementConfig:
                UpdateRuntimeOn: Auto
